<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">

<!-- Styles -->
<link rel="stylesheet" type="text/css" href="tgui.css">

<!-- This is processed in byond, so interfaces can override the
  html head if needed, for custom sheets of style etc. -->
<!--customheadhtml-->
<script id="data" type="application/json" data-ref="[ref]">{}</script>

</head>
<body class="">

<!-- Old TGUI container -->
<div id="container" class="container">
  <div class="notice">
    <span>Loading...</span><br>
  </div>
</div>

<!-- Scripts -->
<script type="text/javascript">
// Explicitly state to the script this is a fallback html document
window.tguiFallback = true;
// Retrieve and save ref to a global variable
// Since this is a fallback html, we get the ref from the querystring
var ref = location.search.replace('?ref=', '');
document.getElementById('data').setAttribute('data-ref', ref);
// Early global error handling
window.onerror = function (msg, url, line, col, error) {
  var logString = msg + ' (' + url + ' line ' + line + ')'
    + '\nUser Agent: ' + navigator.userAgent;
  // Print to the page
  // NOTE: document.write() only works on IE8.
  document.write(logString);
  // Send to the backend
  location.href = 'byond://?src=' + ref
    + '&action=tgui:log&error=true'
    + '&log=' + encodeURIComponent(logString);
};
</script>
<script defer src='tgui.js'></script>

<noscript>
  <div class="notice">
    <div>Javascript is required in order to use this interface.</div>
    <div>Please enable Javascript and restart the game.</div>
  </div>
</noscript>

</body>
</html>
